---
title: '《24小时365天不间断服务:服务器/基础设施核心技术》 读书笔记'
date: 2017-05-23 13:18:14
tags: Web
categories: 读书笔记
---

> 看完《大规模Web服务开发技术》，趁热打铁，再来看这本，加强一下学习目前先丢下，因为没有实际操作的机会，看过之后并没有实际学到什么。

<!--more-->
## 术语
> 一些之前没咋接触过的术语

- AP 服务器(Application Server)    应用服务器，即能返回动态内容的服务器。 
- CDN(Content Delivery Network，内容分发网络)    发送内容的网络系统。用于提高信息发送的性能和实用性。其结构上的特点是:从散布在全世界 的缓存服务器中，选择离客户端较近的服务器来发送信息，据此实现性 能的提升。  
- IPVS(IP Virtual Server，IP 虚拟服务器)
- LVS(Linux Virtual Server，Linux 虚拟服务器)    Linux 中旨在搭建具有可扩展性的、实用性较高的系统的项目。项 目成果之一即为 Linux 负载分流所设计的 IPVS。  
- NIC(Network Interface Card，网络接口卡，简称网卡)
    同时也可称为 LAN 卡、网络适配器等。 
- Netfilter    Linux 内核中操作网络数据包所需的协议框架。
- OSI 参考模型
    第七层(应用层):HTTP 及 SMT 等通信协议    
    第四层(传输层):TCP 及 UDP     
    第三层(网络层):IP、ARP 及 ICMP     
    第二层(数据链路层):以太网等 
- VIP(Virtual IP Address，虚拟 IP 地址)
    不同于物理性质的服务器及网卡，该 IP 地址会被浮动地分配某项 服务或功能。例如对于负载均衡器，接收客户端请求的 IP 地址就称为 VIP。这是 因为该 IP 地址对 HTTP 等服务进行了关联，另外在冗余的 Active/Backup 架构中，唯一的 Master，即 Active 的负载均衡器也继承了该 IP 的行为。    虚拟地址通常也称为虚拟 IP 地址。
- 网络引导(Network Boot)
    通过网络获取启动时必要的引导加载程序和内核映像并启动。

## 第 1 章 服务器及基础设施搭建入门
> 冗余及负载分流的基础

- 冗余的本质
    设想可能发生的故障 -> 根据故障准备备份设备 -> 部署故障发生时切换到备份设备的工作机制
- 冷备份(应对路由器故障的情况)
    平常并不会用到备份设备，只有在故障 发生时才需要连接到备份设备，该工作机制称为“冷备份”(Cold Standby)。在此需要关注的重点是:现用设备与备份设备的相关设定需要完全 一致。即在冗余系统中“必须确保现用设备始终与备份设备的架构保持 同样的状态”。
- 热备份(应对Web服务器故障的情况)
    让 Web 服务器的备份设备一直保持 接入电源及 Internet 的状态。在现用设备内容更新时，备份设备也同步 更新内容以确保与现用设备的内容一致。
- 故障检测
     1. ICMP监控(第三层)
         ICMP(异常发生时通知错误及错误信息的协议)监控是指, 检查由ICMPB所发出的echo请求是否得到了应答。
     2. 端口监控(第四层)
        端口监控是指，通过使用 TCP 协议尝试连接目标主机，检查目标主机是 否能被连接。 
     3. 服务监控(第七层)
         通过实际发出 HTTP 请求等，检查该请求是否得到了应答, 不过有可能加重服务器负担。
    使用ICMP监控，是为了检测路由器是否存在故障。请注意这里并不是对路由器进行 ICMP 监控。因为需要确认的 是“路由器是否正确进行了分组(Packet)交换”，因此从网络上的其他 主机来监控 Web 服务器是比较好的选择。总结，**只要确定 Web 服 务器与 Internet 能够进行通信就可以了**。
- DNS 轮询与负载均衡器的不同点
    负载均衡器(Load  Balancer，也称负载分发或负载分流设备)能够 将向同一 IP 地址发出的请求分发到多台服务器进行处理。而 DNS 轮询 则需要分别向 Web 服务器分配不同的 IP 地址(全局地址)。因此使用负 载均衡器，能够节省全局地址的使用。使用 DNS 轮询的情况下，在架设 Web 服务的冗余结构时会费心费力，而负载均衡器则无需这样的操作。
- 虚拟路由器冗余协议(VRRP)
    路由器与负载均衡器的故障转移的原理，就是检查节点是否正常工作，万一出问题的话，备用节点就会映射 VIP(虚拟地址)，发生故障转移。      
    
## 第 2 章 优化服务器及基础设施的拓扑结构
> 诸如配置反向代理，MySQL设置主从，还是等到实际应用再去处理吧。 

- 缓存
    在大多数Web浏览器中，当初次访问下载该文件时，浏览器会将其缓存在本地，当再次访问时，将直接从本地调出该文件。在浏览器中，为了查看远程文件是否已经更新，可以使用HTTP头替换服务器与文档的修改日期。客户端与服务器有HTTP缓存，服务器与服务器间应该也有类似HTTP缓存的方法存在，如Squid。在可以缓存整个页面的情况下，使用Squid是比较明智的选择。在存储诸如用户信息这种信息，可选择memcached。

## 第 3 章 选择轻量高速的存储服务器>     

暂时丢下，等真实接触这些再来研究

